<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hola Mundo con D3.js</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
</head>
<body>
    <h1>Visualización de JSON con D3.js</h1>
    <p>Lectura de datos desde un archivo JSON.</p>

    <!-- SVG para visualizar datos -->
    <svg id="jsonDemo" width="400" height="400" style="border: 1px solid black;"></svg>

    <script>
    // Define la función para visualizar datos en el SVG
    function drawText(selector, data) {
        const svg = d3.select(selector);
        // Elimina cualquier texto existente
        svg.selectAll("text").remove();
        
        // Agrega texto para cada elemento del JSON
        svg.selectAll("text")
          .data(data) // Vincula los datos al SVG
          .enter() // Crea nuevos elementos de texto
          .append("text")
          .attr("x", 10) // Posición horizontal
          .attr("y", (d, i) => (i + 1) * 20) // Posición vertical (20px entre líneas)
          .text(d => {
            if (d.id && d.value !== undefined) { // Verifica si existen las propiedades necesarias
              return `${d.id}: ${d.value}`;
            } else {
              return "Datos incompletos"; // Si faltan propiedades
            }
          });
    }

    // Carga el archivo JSON y muestra datos en el SVG
    d3.json("samples/sample.json") // Reemplaza con la ruta correcta al archivo JSON
      .then(function(data) {
        console.log("Datos leídos:", data); // Para verificar datos en la consola

        drawText("#jsonDemo", data); // Muestra datos en el SVG
      })
      .catch(function(error) {
        console.error("Error al cargar el JSON:", error); // Captura errores al cargar JSON
      });
    </script>
</body>

</html>
